<div class="diocese-maintenance">
  <h2>Diocese Maintenance</h2>

  <!-- Form container -->
  <div class="form-container">
    <!-- Row 1: Diocese Details -->
    <div class="row-1">
      <div class="section diocese" data-title="Diocese Details">
        <div>
          <label>Diocese Name</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseName" />

          <!-- Inline error only if user submitted and it's still blank -->
          <div *ngIf="hasSubmitted && !selectedDiocese.DioceseName?.trim()" class="inline-error">
            Diocese Name is required.
          </div>
        </div>
        <div>
          <label>Street No</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseStreetNo" />
        </div>
        <div>
          <label>Street Name</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseStreetName" />
        </div>
        <div>
          <label>Suburb</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseSuburb" />
        </div>
      </div>
    </div><!-- end row-1 -->

    <!-- Row 2: Location / Contact -->
    <div class="row-2">
      <div class="section location" data-title="Location / Contact">
        <div>
          <label>State</label>
          <select [(ngModel)]="selectedDiocese.DioceseState">
            <option value="">Select State</option>
            <option *ngFor="let s of states" [value]="s">{{ s }}</option>
          </select>
        </div>
        <div>
          <label>Postcode</label>
          <input type="text" [(ngModel)]="selectedDiocese.DiocesePostcode" />
        </div>
        <div>
          <label>Phone</label>
          <input type="text" [(ngModel)]="selectedDiocese.DiocesePhone" />
        </div>
        <div>
          <label>Email</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseEmail" />
        </div>
        <div>
          <label>Website</label>
          <input type="text" [(ngModel)]="selectedDiocese.DioceseWebsite" />
        </div>
      </div>
    </div><!-- end row-2 -->
  </div><!-- end form-container -->

  <!-- Buttons (same order/names as Adoration) -->
  <div class="buttons">
    <button (click)="addDiocese()">Add</button>
    <button (click)="modifyDiocese()">Modify</button>
    <button (click)="deleteDiocese()">Delete</button>
    <button (click)="cancel()">Cancel</button>
  </div>

  <!-- Results area: grid-based, drag-and-drop columns -->
  <div class="results-area">
    <div class="grid-table" cdkDropList cdkDropListOrientation="horizontal" [cdkDropListData]="columns"
      (cdkDropListDropped)="onDrop($event)" [style.gridTemplateColumns]="gridTemplateColumns">
      <div class="grid-column" *ngFor="let column of columns; let i = index" cdkDrag [cdkDragData]="column"
        (cdkDragEntered)="onDragEntered($event)" (cdkDragExited)="onDragExited($event)">
        <!-- Column Header -->
        <div class="grid-column-header">
          <span class="drag-handle" cdkDragHandle>â˜°</span>
          <ng-template cdkDragPreview>
            <div class="custom-drag-preview">{{ column.header }}</div>
          </ng-template>
          <ng-template cdkDragPlaceholder>
            <div class="custom-drag-placeholder">
              Dropping {{ column.header }} here
            </div>
          </ng-template>
          {{ column.header }}
        </div>

        <!-- Column cells -->
        <div class="grid-column-cell" *ngFor="let row of dioceses; trackBy: trackByDioceseID"
          (click)="selectDiocese(row)">
          {{ getCellValue(row, column) }}
        </div>
      </div>
    </div>
  </div>
</div>