<div class="rosary-crusade">
  <h2>Rosary Crusade</h2>

  <div class="buttons">
    <button (click)="addCrusade()">Add</button>
  </div>

  <!-- Filter Section -->
  <div class="form-container">
    <div class="section filter" data-title="Filter">
      <div class="row-filter">
        <div class="field-group state">
          <label>State</label>
          <select [(ngModel)]="filterStateID" (change)="onFilterStateChange()">
            <option [ngValue]="0">All States</option>
            <option *ngFor="let st of allStates" [ngValue]="st.stateId">
              {{ st.stateAbbreviation }}
            </option>
          </select>
        </div>
        <div class="field-group diocese">
          <label>Diocese</label>
          <select [(ngModel)]="filterDioceseID" (change)="onFilterDioceseChange()" [disabled]="dioceseDisabled">
            <option [ngValue]="null">All Dioceses</option>
            <option *ngFor="let d of filteredDioceses" [ngValue]="d.dioceseId">
              {{ d.dioceseName }}
            </option>
          </select>
        </div>
        <div class="field-group parish">
          <label>Parish</label>
          <select [(ngModel)]="filterParishID" (change)="onFilterParishChange()" [disabled]="parishDisabled">
            <option [ngValue]="null">All Parishes</option>
            <option *ngFor="let p of filteredParishes" [ngValue]="p.parishId">
              {{ p.parishName }}
            </option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <app-data-table
    [columns]="columns"
    [data]="crusades"
    [pageSizeOptions]="[10, 25, 50]"
    [defaultPageSize]="10"
    [sortColumn]="'crusadeStartTime'"
    [sortDirection]="'asc'"
    [clickable]="true"
    [trackIdField]="'crusadeId'"
    (rowClicked)="onRowClicked($event)">
  </app-data-table>
</div>