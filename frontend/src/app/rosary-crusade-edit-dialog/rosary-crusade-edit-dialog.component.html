<div class="rosary-crusade-edit-dialog">
  <h2>{{ data.crusadeId ? 'Edit Rosary Crusade' : 'Add Rosary Crusade' }}</h2>

  <div class="form-container">
    <!-- SECTION #1: Confession and Mass -->
    <div class="section confession" data-title="Confession">
      <div class="row-1">
        <div class="field-group confession-start">
          <label>Start</label>
          <input type="time" [(ngModel)]="selectedCrusade.confessionStartTime" />
        </div>
        <div class="field-group confession-end">
          <label>End</label>
          <input type="time" [(ngModel)]="selectedCrusade.confessionEndTime" />
        </div>
      </div>
    </div>

    <div class="section mass" data-title="Mass">
      <div class="row-1">
        <div class="field-group mass-start">
          <label>Start</label>
          <input type="time" [(ngModel)]="selectedCrusade.massStartTime" />
        </div>
        <div class="field-group mass-end">
          <label>End</label>
          <input type="time" [(ngModel)]="selectedCrusade.massEndTime" />
        </div>
      </div>
    </div>

    <!-- SECTION #2: Rosary Crusade -->
    <div class="section crusade" data-title="Rosary Crusade">
      <div class="row-1">
        <div class="field-group crusade-start">
          <label>Start</label>
          <input type="time" [(ngModel)]="selectedCrusade.crusadeStartTime" />
          <div *ngIf="hasSubmitted && !selectedCrusade.crusadeStartTime?.trim()" class="inline-error">
            Crusade Start is required.
          </div>
        </div>
        <div class="field-group crusade-end">
          <label>End</label>
          <input type="time" [(ngModel)]="selectedCrusade.crusadeEndTime" />
          <div *ngIf="hasSubmitted && !selectedCrusade.crusadeEndTime?.trim()" class="inline-error">
            Crusade End is required.
          </div>
        </div>
        <div class="field-group crusade-state">
          <label>State</label>
          <select [(ngModel)]="selectedCrusade.stateId" [disabled]="stateDropdownDisabled">
            <option [ngValue]="0">-- select state --</option>
            <option *ngFor="let st of allStates" [ngValue]="st.stateId">
              {{ st.stateAbbreviation }}
            </option>
          </select>
          <div *ngIf="hasSubmitted && (!selectedCrusade.stateId || selectedCrusade.stateId === 0)" class="inline-error">
            State is required.
          </div>
        </div>
        <div class="field-group crusade-diocese">
          <label>Diocese</label>
          <select [(ngModel)]="selectedCrusade.dioceseId" [disabled]="dioceseDropdownDisabled">
            <option [ngValue]="0">-- select diocese --</option>
            <option *ngFor="let d of allDioceses" [ngValue]="d.dioceseId">
              {{ d.dioceseName }}
            </option>
          </select>
          <div *ngIf="hasSubmitted && (!selectedCrusade.dioceseId || selectedCrusade.dioceseId === 0)" class="inline-error">
            Diocese is required.
          </div>
        </div>
        <div class="field-group crusade-parish">
          <label>Parish</label>
          <select [(ngModel)]="selectedCrusade.parishId" [disabled]="parishDropdownDisabled">
            <option [ngValue]="0">-- select parish --</option>
            <option *ngFor="let p of allParishes" [ngValue]="p.parishId">
              {{ p.parishName }}
            </option>
          </select>
          <div *ngIf="hasSubmitted && (!selectedCrusade.parishId || selectedCrusade.parishId === 0)" class="inline-error">
            Parish is required.
          </div>
        </div>
      </div>
    </div>

    <!-- SECTION #3: Contact -->
    <div class="section contact" data-title="Contact">
      <div class="row-2">
        <div class="field-group contact-name">
          <label>Contact Name</label>
          <input type="text" [(ngModel)]="selectedCrusade.contactName" />
        </div>
        <div class="field-group contact-phone">
          <label>Contact Phone</label>
          <input type="text" [(ngModel)]="selectedCrusade.contactPhone" />
        </div>
        <div class="field-group contact-email">
          <label>Contact Email</label>
          <input type="text" [(ngModel)]="selectedCrusade.contactEmail" />
        </div>
      </div>
    </div>

    <!-- SECTION #4: Comments -->
    <div class="section comments" data-title="Comments">
      <div class="row-2">
        <div class="field-group comments">
          <label>Comments</label>
          <textarea [(ngModel)]="selectedCrusade.comments"></textarea>
        </div>
      </div>
    </div>

    <!-- CRUD Buttons -->
    <div class="buttons">
      <button (click)="addCrusade()" [disabled]="uiMode === 'editing'">Add</button>
      <button (click)="modifyCrusade()" [disabled]="uiMode !== 'editing'">Modify</button>
      <button (click)="deleteCrusade()" [disabled]="uiMode !== 'editing'">Delete</button>
      <button (click)="cancel()">Cancel</button>
    </div>
  </div>
</div>